<!DOCTYPE HTML>
<html lang="en" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Upgrade Guide | Laravel Documentation</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.1.0">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="gitbook/style.css">
    
    

        
    
    
    <link rel="next" href="./contributions.html" />
    
    
    <link rel="prev" href="./releases.html" />
    

        
    </head>
    <body>
        
        
    <div class="book" data-level="1.2" data-basepath="." data-revision="Sun Jun 07 2015 09:41:41 GMT+0530 (IST)">
    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Type to search" class="form-control" />
    </div>
    <ul class="summary">
        
        
        
        

        

        
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="./index.html">
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1" >
            
            <span><b>1.</b> Prologue</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1" data-path="releases.html">
            
                
                    <a href="./releases.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                        Release Notes
                    </a>
                
            
            
        </li>
    
        <li class="chapter active" data-level="1.2" data-path="upgrade.html">
            
                
                    <a href="./upgrade.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.</b>
                        
                        Upgrade Guide
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="contributions.html">
            
                
                    <a href="./contributions.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.</b>
                        
                        Contribution Guide
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2" >
            
            <span><b>2.</b> Setup</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1" data-path="installation.html">
            
                
                    <a href="./installation.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                        Installation
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="homestead.html">
            
                
                    <a href="./homestead.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.</b>
                        
                        Homestead
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="configuration.html">
            
                
                    <a href="./configuration.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.3.</b>
                        
                        Configuration
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3" >
            
            <span><b>3.</b> The Basics</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1" data-path="routing.html">
            
                
                    <a href="./routing.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.</b>
                        
                        Routing
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="middleware.html">
            
                
                    <a href="./middleware.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.2.</b>
                        
                        Middleware
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="controllers.html">
            
                
                    <a href="./controllers.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.3.</b>
                        
                        Controllers
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="requests.html">
            
                
                    <a href="./requests.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.4.</b>
                        
                        Requests
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="3.5" data-path="responses.html">
            
                
                    <a href="./responses.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.5.</b>
                        
                        Responses
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="3.6" data-path="views.html">
            
                
                    <a href="./views.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.6.</b>
                        
                        Views
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="3.7" data-path="templates.html">
            
                
                    <a href="./templates.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.7.</b>
                        
                        Blade Templates
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4" >
            
            <span><b>4.</b> Architecture Foundations</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1" data-path="lifecycle.html">
            
                
                    <a href="./lifecycle.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.1.</b>
                        
                        Request Lifecycle
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="structure.html">
            
                
                    <a href="./structure.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.2.</b>
                        
                        Application Structure
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="providers.html">
            
                
                    <a href="./providers.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.3.</b>
                        
                        Service Providers
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="4.4" data-path="container.html">
            
                
                    <a href="./container.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.4.</b>
                        
                        Service Container
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="4.5" data-path="contracts.html">
            
                
                    <a href="./contracts.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.5.</b>
                        
                        Contracts
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="4.6" data-path="facades.html">
            
                
                    <a href="./facades.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.6.</b>
                        
                        Facades
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5" >
            
            <span><b>5.</b> Services</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.1" data-path="authentication.html">
            
                
                    <a href="./authentication.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.1.</b>
                        
                        Authentication
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="5.2" data-path="artisan.html">
            
                
                    <a href="./artisan.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.2.</b>
                        
                        Artisan Console
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="5.3" data-path="billing.html">
            
                
                    <a href="./billing.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.3.</b>
                        
                        Billing
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="5.4" data-path="cache.html">
            
                
                    <a href="./cache.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.4.</b>
                        
                        Cache
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="5.5" data-path="collections.html">
            
                
                    <a href="./collections.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.5.</b>
                        
                        Collections
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="5.6" data-path="bus.html">
            
                
                    <a href="./bus.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.6.</b>
                        
                        Command Bus
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="5.7" data-path="extending.html">
            
                
                    <a href="./extending.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.7.</b>
                        
                        Core Extension
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="5.8" data-path="elixir.html">
            
                
                    <a href="./elixir.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.8.</b>
                        
                        Elixir
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="5.9" data-path="encryption.html">
            
                
                    <a href="./encryption.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.9.</b>
                        
                        Encryption
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="5.10" data-path="errors.html">
            
                
                    <a href="./errors.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.10.</b>
                        
                        Errors &amp; Logging
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="5.11" data-path="events.html">
            
                
                    <a href="./events.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.11.</b>
                        
                        Events
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="5.12" data-path="filesystem.html">
            
                
                    <a href="./filesystem.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.12.</b>
                        
                        Filesystem / Cloud Storage
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="5.13" data-path="hashing.html">
            
                
                    <a href="./hashing.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.13.</b>
                        
                        Hashing
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="5.14" data-path="helpers.html">
            
                
                    <a href="./helpers.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.14.</b>
                        
                        Helpers
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="5.15" data-path="localization.html">
            
                
                    <a href="./localization.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.15.</b>
                        
                        Localization
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="5.16" data-path="mail.html">
            
                
                    <a href="./mail.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.16.</b>
                        
                        Mail
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="5.17" data-path="packages.html">
            
                
                    <a href="./packages.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.17.</b>
                        
                        Package Development
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="5.18" data-path="pagination.html">
            
                
                    <a href="./pagination.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.18.</b>
                        
                        Pagination
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="5.19" data-path="queues.html">
            
                
                    <a href="./queues.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.19.</b>
                        
                        Queues
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="5.20" data-path="redis.html">
            
                
                    <a href="./redis.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.20.</b>
                        
                        Redis
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="5.21" data-path="session.html">
            
                
                    <a href="./session.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.21.</b>
                        
                        Session
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="5.22" data-path="envoy.html">
            
                
                    <a href="./envoy.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.22.</b>
                        
                        SSH Tasks
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="5.23" data-path="scheduling.html">
            
            <span><b>5.23.</b> Task Scheduling</span>
            
            
        </li>
    
        <li class="chapter " data-level="5.24" data-path="testing.html">
            
                
                    <a href="./testing.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.24.</b>
                        
                        Testing
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="5.25" data-path="validation.html">
            
                
                    <a href="./validation.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.25.</b>
                        
                        Validation
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6" >
            
            <span><b>6.</b> Database</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.1" data-path="database.html">
            
                
                    <a href="./database.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.1.</b>
                        
                        Getting Started
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="6.2" data-path="queries.html">
            
                
                    <a href="./queries.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.2.</b>
                        
                        Query Builder
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="6.3" data-path="schema.html">
            
                
                    <a href="./schema.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.3.</b>
                        
                        Schema Builder
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="6.4" data-path="migrations.html">
            
                
                    <a href="./migrations.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.4.</b>
                        
                        Migrations &amp; Seeding
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="7" >
            
            <span><b>7.</b> Eloquent ORM</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="7.1" data-path="eloquent.html">
            
                
                    <a href="./eloquent.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.1.</b>
                        
                        Getting Started
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="8" >
            
            <span><b>8.</b> Artisan</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="8.1" data-path="artisan.html">
            
                
                    <a href="./artisan.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.1.</b>
                        
                        Artisan Console
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="8.2" data-path="commands.html">
            
                
                    <a href="./commands.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.2.</b>
                        
                        Development
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    


        
        <li class="divider"></li>
        <li>
            <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                Published with GitBook
            </a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Table of Contents"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search" aria-label="Search"><i class="fa fa-search"></i></a>
    
    <div id="font-settings-wrapper" class="dropdown pull-left">
        <a href="#" class="btn toggle-dropdown" aria-label="Font Settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="buttons">
        <button type="button" id="reduce-font-size" class="button size-2">A</button>
        <button type="button" id="enlarge-font-size" class="button size-2">A</button>
    </div>

    <div class="buttons font-family-list">
        <button type="button" data-font="0" class="button">Serif</button>
        <button type="button" data-font="1" class="button">Sans</button>
    </div>

    <div class="buttons color-theme-list">
        <button type="button" id="color-theme-preview-0" class="button size-3" data-theme="0">White</button>
        <button type="button" id="color-theme-preview-1" class="button size-3" data-theme="1">Sepia</button>
        <button type="button" id="color-theme-preview-2" class="button size-3" data-theme="2">Night</button>
    </div>
</div>

    </div>

    <!-- Actions Right -->
    
    <div class="dropdown pull-right">
        <a href="#" class="btn toggle-dropdown" aria-label="Share"><i class="fa fa-share-alt"></i>
        </a>
        <div class="dropdown-menu font-settings dropdown-left">
            <div class="dropdown-caret">
                <span class="caret-outer"></span>
                <span class="caret-inner"></span>
            </div>
            <div class="buttons">
                <button type="button" data-sharing="twitter" class="button">
                    Share on Twitter
                </button>
                <button type="button" data-sharing="google-plus" class="button">
                    Share on Google
                </button>
                <button type="button" data-sharing="facebook" class="button">
                    Share on Facebook
                </button>
                <button type="button" data-sharing="weibo" class="button">
                    Share on Weibo
                </button>
                <button type="button" data-sharing="instapaper" class="button">
                    Share on Instapaper
                </button>
            </div>
        </div>
    </div>
    

    
    <a href="#" target="_blank" class="btn pull-right google-plus-sharing-link sharing-link" data-sharing="google-plus" aria-label="Google"><i class="fa fa-google-plus"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right facebook-sharing-link sharing-link" data-sharing="facebook" aria-label="Facebook"><i class="fa fa-facebook"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right twitter-sharing-link sharing-link" data-sharing="twitter" aria-label="Twitter"><i class="fa fa-twitter"></i></a>
    
    
    


    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="./" >Laravel Documentation</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="upgrade-guide">Upgrade Guide</h1>
<ul>
<li><a href="#upgrade-5.0.16">Upgrading To 5.0.16</a></li>
<li><a href="#upgrade-5.0">Upgrading To 5.0 From 4.2</a></li>
<li><a href="#upgrade-4.2">Upgrading To 4.2 From 4.1</a></li>
<li><a href="#upgrade-4.1.29">Upgrading To 4.1.29 From &lt;= 4.1.x</a></li>
<li><a href="#upgrade-4.1.26">Upgrading To 4.1.26 From &lt;= 4.1.25</a></li>
<li><a href="#upgrade-4.1">Upgrading To 4.1 From 4.0</a></li>
</ul>
<p><a name="upgrade-5.0.16"></a></p>
<h2 id="upgrading-to-5-0-16">Upgrading To 5.0.16</h2>
<p>In your <code>bootstrap/autoload.php</code> file, update the <code>$compiledPath</code> variable to:</p>
<pre><code>$compiledPath = __DIR__.&apos;/../vendor/compiled.php&apos;;
</code></pre><p><a name="upgrade-5.0"></a></p>
<h2 id="upgrading-to-5-0-from-4-2">Upgrading To 5.0 From 4.2</h2>
<h3 id="fresh-install-then-migrate">Fresh Install, Then Migrate</h3>
<p>The recommended method of upgrading is to create a new Laravel <code>5.0</code> install and then to copy your <code>4.2</code> site&apos;s unique application files into the new application. This would include controllers, routes, Eloquent models, Artisan commands, assets, and other code specific to your application.</p>
<p>To start, <a href="docs/installation">install a new Laravel 5 application</a> into a fresh directory in your local environment. We&apos;ll discuss each piece of the migration process in further detail below.</p>
<h3 id="composer-dependencies-packages">Composer Dependencies &amp; Packages</h3>
<p>Don&apos;t forget to copy any additional Composer dependencies into your 5.0 application. This includes third-party code such as SDKs.</p>
<p>Some Laravel-specific packages may not be compatible with Laravel 5 on initial release. Check with your package&apos;s maintainer to determine the proper version of the package for Laravel 5. Once you have added any additional Composer dependencies your application needs, run <code>composer update</code>.</p>
<h3 id="namespacing">Namespacing</h3>
<p>By default, Laravel 4 applications did not utilize namespacing within your application code. So, for example, all Eloquent models and controllers simply lived in the &quot;global&quot; namespace. For a quicker migration, you can simply leave these classes in the global namespace in Laravel 5 as well.</p>
<h3 id="configuration">Configuration</h3>
<h4 id="migrating-environment-variables">Migrating Environment Variables</h4>
<p>Copy the new <code>.env.example</code> file to <code>.env</code>, which is the <code>5.0</code> equivalent of the old <code>.env.php</code> file. Set any appropriate values there, like your <code>APP_ENV</code> and <code>APP_KEY</code> (your encryption key), your database credentials, and your cache and session drivers.</p>
<p>Additionally, copy any custom values you had in your old <code>.env.php</code> file and place them in both <code>.env</code> (the real value for your local environment) and <code>.env.example</code> (a sample instructional value for other team members).</p>
<p>For more information on environment configuration, view the <a href="docs/configuration#environment-configuration">full documentation</a>.</p>
<blockquote>
<p><strong>Note:</strong> You will need to place the appropriate <code>.env</code> file and values on your production server before deploying your Laravel 5 application.</p>
</blockquote>
<h4 id="configuration-files">Configuration Files</h4>
<p>Laravel 5.0 no longer uses <code>app/config/{environmentName}/</code> directories to provide specific configuration files for a given environment. Instead, move any configuration values that vary by environment into <code>.env</code>, and then access them in your configuration files using <code>env(&apos;key&apos;, &apos;default value&apos;)</code>. You will see examples of this in the <code>config/database.php</code> configuration file.</p>
<p>Set the config files in the <code>config/</code> directory to represent either the values that are consistent across all of your environments, or set them to use <code>env()</code> to load values that vary by environment.</p>
<p>Remember, if you add more keys to <code>.env</code> file, add sample values to the <code>.env.example</code> file as well. This will help your other team members create their own <code>.env</code> files.</p>
<h3 id="routes">Routes</h3>
<p>Copy and paste your old <code>routes.php</code> file into your new <code>app/Http/routes.php</code>.</p>
<h3 id="controllers">Controllers</h3>
<p>Next, move all of your controllers into the <code>app/Http/Controllers</code> directory. Since we are not going to migrate to full namespacing in this guide, add the <code>app/Http/Controllers</code> directory to the <code>classmap</code> directive of your <code>composer.json</code> file. Next, you can remove the namespace from the abstract <code>app/Http/Controllers/Controller.php</code> base class. Verify that your migrated controllers are extending this base class.</p>
<p>In your <code>app/Providers/RouteServiceProvider.php</code> file, set the <code>namespace</code> property to <code>null</code>.</p>
<h3 id="route-filters">Route Filters</h3>
<p>Copy your filter bindings from <code>app/filters.php</code> and place them into the <code>boot()</code> method of <code>app/Providers/RouteServiceProvider.php</code>. Add <code>use Illuminate\Support\Facades\Route;</code> in the <code>app/Providers/RouteServiceProvider.php</code> in order to continue using the <code>Route</code> Facade.</p>
<p>You do not need to move over any of the default Laravel 4.0 filters such as <code>auth</code> and <code>csrf</code>; they&apos;re all here, but as middleware. Edit any routes or controllers that reference the old default filters (e.g. <code>[&apos;before&apos; =&gt; &apos;auth&apos;]</code>) and change them to reference the new middleware (e.g. <code>[&apos;middleware&apos; =&gt; &apos;auth&apos;].</code>)</p>
<p>Filters are not removed in Laravel 5. You can still bind and use your own custom filters using <code>before</code> and <code>after</code>.</p>
<h3 id="global-csrf">Global CSRF</h3>
<p>By default, <a href="docs/routing#csrf-protection">CSRF protection</a> is enabled on all routes. If you&apos;d like to disable this, or only manually enable it on certain routes, remove this line from <code>App\Http\Kernel</code>&apos;s <code>middleware</code> array:</p>
<pre><code>&apos;App\Http\Middleware\VerifyCsrfToken&apos;,
</code></pre><p>If you want to use it elsewhere, add this line to <code>$routeMiddleware</code>:</p>
<pre><code>&apos;csrf&apos; =&gt; &apos;App\Http\Middleware\VerifyCsrfToken&apos;,
</code></pre><p>Now you can add the middleware to individual routes / controllers using <code>[&apos;middleware&apos; =&gt; &apos;csrf&apos;]</code> on the route. For more information on middleware, consult the <a href="docs/middleware">full documentation</a>.</p>
<h3 id="eloquent-models">Eloquent Models</h3>
<p>Feel free to create a new <code>app/Models</code> directory to house your Eloquent models. Again, add this directory to the <code>classmap</code> directive of your <code>composer.json</code> file.</p>
<p>Update any models using <code>SoftDeletingTrait</code> to use <code>Illuminate\Database\Eloquent\SoftDeletes</code>.</p>
<h4 id="eloquent-caching">Eloquent Caching</h4>
<p>Eloquent no longer provides the <code>remember</code> method for caching queries. You now are responsible for caching your queries manually using the <code>Cache::remember</code> function. For more information on caching, consult the <a href="docs/cache">full documentation</a>.</p>
<h3 id="user-authentication-model">User Authentication Model</h3>
<p>To upgrade your <code>User</code> model for Laravel 5&apos;s authentication system, follow these instructions:</p>
<p><strong>Delete the following from your <code>use</code> block:</strong></p>
<pre><code class="lang-php"><span class="hljs-keyword">use</span> <span class="hljs-title">Illuminate</span>\<span class="hljs-title">Auth</span>\<span class="hljs-title">UserInterface</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Illuminate</span>\<span class="hljs-title">Auth</span>\<span class="hljs-title">Reminders</span>\<span class="hljs-title">RemindableInterface</span>;
</code></pre>
<p><strong>Add the following to your <code>use</code> block:</strong></p>
<pre><code class="lang-php"><span class="hljs-keyword">use</span> <span class="hljs-title">Illuminate</span>\<span class="hljs-title">Auth</span>\<span class="hljs-title">Authenticatable</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Illuminate</span>\<span class="hljs-title">Auth</span>\<span class="hljs-title">Passwords</span>\<span class="hljs-title">CanResetPassword</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Illuminate</span>\<span class="hljs-title">Contracts</span>\<span class="hljs-title">Auth</span>\<span class="hljs-title">Authenticatable</span> <span class="hljs-title">as</span> <span class="hljs-title">AuthenticatableContract</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Illuminate</span>\<span class="hljs-title">Contracts</span>\<span class="hljs-title">Auth</span>\<span class="hljs-title">CanResetPassword</span> <span class="hljs-title">as</span> <span class="hljs-title">CanResetPasswordContract</span>;
</code></pre>
<p><strong>Remove the UserInterface and RemindableInterface interfaces.</strong></p>
<p><strong>Mark the class as implementing the following interfaces:</strong></p>
<pre><code class="lang-php">implements AuthenticatableContract, CanResetPasswordContract
</code></pre>
<p><strong>Include the following traits within the class declaration:</strong></p>
<pre><code class="lang-php"><span class="hljs-keyword">use</span> <span class="hljs-title">Authenticatable</span>, <span class="hljs-title">CanResetPassword</span>;
</code></pre>
<p><strong>If you used them, remove <code>Illuminate\Auth\Reminders\RemindableTrait</code>  and <code>Illuminate\Auth\UserTrait</code> from your use block and your class declaration.</strong></p>
<h3 id="cashier-user-changes">Cashier User Changes</h3>
<p>The name of the trait and interface used by <a href="docs/billing">Laravel Cashier</a> has changed. Instead of using <code>BillableTrait</code>, use the <code>Laravel\Cashier\Billable</code> trait. And, instead of <code>Laravel\Cashier\BillableInterface</code> implement the <code>Laravel\Cashier\Contracts\Billable</code> interface instead. No other method changes are required.</p>
<h3 id="artisan-commands">Artisan Commands</h3>
<p>Move all of your command classes from your old <code>app/commands</code> directory to the new <code>app/Console/Commands</code> directory. Next, add the <code>app/Console/Commands</code> directory to the <code>classmap</code> directive of your <code>composer.json</code> file.</p>
<p>Then, copy your list of Artisan commands from <code>start/artisan.php</code> into the <code>command</code> array of the <code>app/Console/Kernel.php</code> file.</p>
<h3 id="database-migrations-seeds">Database Migrations &amp; Seeds</h3>
<p>Delete the two migrations included with Laravel 5.0, since you should already have the users table in your database.</p>
<p>Move all of your migration classes from the old <code>app/database/migrations</code> directory to the new <code>database/migrations</code>. All of your seeds should be moved from <code>app/database/seeds</code> to <code>database/seeds</code>.</p>
<h3 id="global-ioc-bindings">Global IoC Bindings</h3>
<p>If you have any <a href="docs/container">IoC</a> bindings in <code>start/global.php</code>, move them all to the <code>register</code> method of the <code>app/Providers/AppServiceProvider.php</code> file. You may need to import the <code>App</code> facade.</p>
<p>Optionally, you may break these bindings up into separate service providers by category.</p>
<h3 id="views">Views</h3>
<p>Move your views from <code>app/views</code> to the new <code>resources/views</code> directory.</p>
<h3 id="blade-tag-changes">Blade Tag Changes</h3>
<p>For better security by default, Laravel 5.0 escapes all output from both the <code>{{ }}</code> and <code>{{{}}}</code> Blade directives. A new <code>{!! !!}</code> directive has been introduced to display raw, unescaped output. The most secure option when upgrading your application is to only use the new <code>{!! !!}</code> directive when you are <strong>certain</strong> that it is safe to display raw output.</p>
<p>However, if you <strong>must</strong> use the old Blade syntax, add the following lines at the bottom of <code>AppServiceProvider@register</code>:</p>
<pre><code class="lang-php">\Blade::setRawTags(<span class="hljs-string">&apos;{{&quot;, &quot;}}&apos;</span>);
\Blade::setContentTags(<span class="hljs-string">&apos;{{{&quot;, &quot;}}}&apos;</span>);
\Blade::setEscapedContentTags(<span class="hljs-string">&apos;{{{&quot;, &quot;}}}&apos;</span>);
</code></pre>
<p>This should not be done lightly, and may make your application more vulnerable to XSS exploits. Also, comments with <code>{{--</code> will no longer work.</p>
<h3 id="translation-files">Translation Files</h3>
<p>Move your language files from <code>app/lang</code> to the new <code>resources/lang</code> directory.</p>
<h3 id="public-directory">Public Directory</h3>
<p>Copy your application&apos;s public assets from your <code>4.2</code> application&apos;s <code>public</code> directory to your new application&apos;s <code>public</code> directory. Be sure to keep the <code>5.0</code> version of <code>index.php</code>.</p>
<h3 id="tests">Tests</h3>
<p>Move your tests from <code>app/tests</code> to the new <code>tests</code> directory.</p>
<h3 id="misc-files">Misc. Files</h3>
<p>Copy in any other files in your project. For example, <code>.scrutinizer.yml</code>, <code>bower.json</code> and other similar tooling configuration files.</p>
<p>You may move your Sass, Less, or CoffeeScript to any location you wish. The <code>resources/assets</code> directory could be a good default location.</p>
<h3 id="form-html-helpers">Form &amp; HTML Helpers</h3>
<p>If you&apos;re using Form or HTML helpers, you will see an error stating <code>class &apos;Form&apos; not found</code> or <code>class &apos;Html&apos; not found</code>. The Form and HTML helpers have been deprecated in Laravel 5.0; however, there are community-driven replacements such as those maintained by the <a href="http://laravelcollective.com/docs//html" target="_blank">Laravel Collective</a>.</p>
<p>For example, you may add <code>&quot;laravelcollective/html&quot;: &quot;~5.0&quot;</code> to your <code>composer.json</code> file&apos;s <code>require</code> section.</p>
<p>You&apos;ll also need to add the Form and HTML facades and service provider. Edit <code>config/app.php</code> and add this line to the &apos;providers&apos; array:</p>
<pre><code>&apos;Collective\Html\HtmlServiceProvider&apos;,
</code></pre><p>Next, add these lines to the &apos;aliases&apos; array:</p>
<pre><code>&apos;Form&apos; =&gt; &apos;Collective\Html\FormFacade&apos;,
&apos;Html&apos; =&gt; &apos;Collective\Html\HtmlFacade&apos;,
</code></pre><h3 id="cachemanager">CacheManager</h3>
<p>If your application code was injecting <code>Illuminate\Cache\CacheManager</code> to get a non-Facade version of Laravel&apos;s cache, inject <code>Illuminate\Contracts\Cache\Repository</code> instead.</p>
<h3 id="pagination">Pagination</h3>
<p>Replace any calls to <code>$paginator-&gt;links()</code> with <code>$paginator-&gt;render()</code>.</p>
<p>Replace any calls to <code>$paginator-&gt;getFrom()</code> and <code>$paginator-&gt;getTo()</code> with <code>$paginator-&gt;firstItem()</code> and <code>$paginator-&gt;lastItem()</code> respectively.</p>
<p>Remove the &quot;get&quot; prefix from calls to <code>$paginator-&gt;getPerPage()</code>, <code>$paginator-&gt;getCurrentPage()</code>, <code>$paginator-&gt;getLastPage()</code> and <code>$paginator-&gt;getTotal()</code> (e.g. <code>$paginator-&gt;perPage()</code>).</p>
<h3 id="beanstalk-queuing">Beanstalk Queuing</h3>
<p>Laravel 5.0 now requires <code>&quot;pda/pheanstalk&quot;: &quot;~3.0&quot;</code> instead of <code>&quot;pda/pheanstalk&quot;: &quot;~2.1&quot;</code>.</p>
<h3 id="remote">Remote</h3>
<p>The Remote component has been deprecated.</p>
<h3 id="workbench">Workbench</h3>
<p>The Workbench component has been deprecated.</p>
<p><a name="upgrade-4.2"></a></p>
<h2 id="upgrading-to-4-2-from-4-1">Upgrading To 4.2 From 4.1</h2>
<h3 id="php-5-4">PHP 5.4+</h3>
<p>Laravel 4.2 requires PHP 5.4.0 or greater.</p>
<h3 id="encryption-defaults">Encryption Defaults</h3>
<p>Add a new <code>cipher</code> option in your <code>app/config/app.php</code> configuration file. The value of this option should be <code>MCRYPT_RIJNDAEL_256</code>.</p>
<pre><code>&apos;cipher&apos; =&gt; MCRYPT_RIJNDAEL_256
</code></pre><p>This setting may be used to control the default cipher used by the Laravel encryption facilities.</p>
<blockquote>
<p><strong>Note:</strong> In Laravel 4.2, the default cipher is <code>MCRYPT_RIJNDAEL_128</code> (AES), which is considered to be the most secure cipher. Changing the cipher back to <code>MCRYPT_RIJNDAEL_256</code> is required to decrypt cookies/values that were encrypted in Laravel &lt;= 4.1</p>
</blockquote>
<h3 id="soft-deleting-models-now-use-traits">Soft Deleting Models Now Use Traits</h3>
<p>If you are using soft deleting models, the <code>softDeletes</code> property has been removed. You must now use the <code>SoftDeletingTrait</code> like so:</p>
<pre><code>use Illuminate\Database\Eloquent\SoftDeletingTrait;

class User extends Eloquent {
    use SoftDeletingTrait;
}
</code></pre><p>You must also manually add the <code>deleted_at</code> column to your <code>dates</code> property:</p>
<pre><code>class User extends Eloquent {
    use SoftDeletingTrait;

    protected $dates = [&apos;deleted_at&apos;];
}
</code></pre><p>The API for all soft delete operations remains the same.</p>
<blockquote>
<p><strong>Note:</strong> The <code>SoftDeletingTrait</code> can not be applied on a base model. It must be used on an actual model class.</p>
</blockquote>
<h3 id="view-pagination-environment-renamed">View / Pagination Environment Renamed</h3>
<p>If you are directly referencing the <code>Illuminate\View\Environment</code> class or <code>Illuminate\Pagination\Environment</code> class, update your code to reference <code>Illuminate\View\Factory</code> and <code>Illuminate\Pagination\Factory</code> instead. These two classes have been renamed to better reflect their function.</p>
<h3 id="additional-parameter-on-pagination-presenter">Additional Parameter On Pagination Presenter</h3>
<p>If you are extending the <code>Illuminate\Pagination\Presenter</code> class, the abstract method <code>getPageLinkWrapper</code> signature has changed to add the <code>rel</code> argument:</p>
<pre><code>abstract public function getPageLinkWrapper($url, $page, $rel = null);
</code></pre><h3 id="iron-io-queue-encryption">Iron.Io Queue Encryption</h3>
<p>If you are using the Iron.io queue driver, you will need to add a new <code>encrypt</code> option to your queue configuration file:</p>
<pre><code>&apos;encrypt&apos; =&gt; true
</code></pre><p><a name="upgrade-4.1.29"></a></p>
<h2 id="upgrading-to-4-1-29-from-4-1-x">Upgrading To 4.1.29 From &lt;= 4.1.x</h2>
<p>Laravel 4.1.29 improves the column quoting for all database drivers. This protects your application from some mass assignment vulnerabilities when <strong>not</strong> using the <code>fillable</code> property on models. If you are using the <code>fillable</code> property on your models to protect against mass assignment, your application is not vulnerable. However, if you are using <code>guarded</code> and are passing a user controlled array into an &quot;update&quot; or &quot;save&quot; type function, you should upgrade to <code>4.1.29</code> immediately as your application may be at risk of mass assignment.</p>
<p>To upgrade to Laravel 4.1.29, simply <code>composer update</code>. No breaking changes are introduced in this release.</p>
<p><a name="upgrade-4.1.26"></a></p>
<h2 id="upgrading-to-4-1-26-from-4-1-25">Upgrading To 4.1.26 From &lt;= 4.1.25</h2>
<p>Laravel 4.1.26 introduces security improvements for &quot;remember me&quot; cookies. Before this update, if a remember cookie was hijacked by another malicious user, the cookie would remain valid for a long period of time, even after the true owner of the account reset their password, logged out, etc.</p>
<p>This change requires the addition of a new <code>remember_token</code> column to your <code>users</code> (or equivalent) database table. After this change, a fresh token will be assigned to the user each time they login to your application. The token will also be refreshed when the user logs out of the application. The implications of this change are: if a &quot;remember me&quot; cookie is hijacked, simply logging out of the application will invalidate the cookie.</p>
<h3 id="upgrade-path">Upgrade Path</h3>
<p>First, add a new, nullable <code>remember_token</code> of VARCHAR(100), TEXT, or equivalent to your <code>users</code> table.</p>
<p>Next, if you are using the Eloquent authentication driver, update your <code>User</code> class with the following three methods:</p>
<pre><code>public function getRememberToken()
{
    return $this-&gt;remember_token;
}

public function setRememberToken($value)
{
    $this-&gt;remember_token = $value;
}

public function getRememberTokenName()
{
    return &apos;remember_token&apos;;
}
</code></pre><blockquote>
<p><strong>Note:</strong> All existing &quot;remember me&quot; sessions will be invalidated by this change, so all users will be forced to re-authenticate with your application.</p>
</blockquote>
<h3 id="package-maintainers">Package Maintainers</h3>
<p>Two new methods were added to the <code>Illuminate\Auth\UserProviderInterface</code> interface. Sample implementations may be found in the default drivers:</p>
<pre><code>public function retrieveByToken($identifier, $token);

public function updateRememberToken(UserInterface $user, $token);
</code></pre><p>The <code>Illuminate\Auth\UserInterface</code> also received the three new methods described in the &quot;Upgrade Path&quot;.</p>
<p><a name="upgrade-4.1"></a></p>
<h2 id="upgrading-to-4-1-from-4-0">Upgrading To 4.1 From 4.0</h2>
<h3 id="upgrading-your-composer-dependency">Upgrading Your Composer Dependency</h3>
<p>To upgrade your application to Laravel 4.1, change your <code>laravel/framework</code> version to <code>4.1.*</code> in your <code>composer.json</code> file.</p>
<h3 id="replacing-files">Replacing Files</h3>
<p>Replace your <code>public/index.php</code> file with <a href="https://github.com/laravel/laravel/blob/v4.1.0/public/index.php" target="_blank">this fresh copy from the repository</a>.</p>
<p>Replace your <code>artisan</code> file with <a href="https://github.com/laravel/laravel/blob/v4.1.0/artisan" target="_blank">this fresh copy from the repository</a>.</p>
<h3 id="adding-configuration-files-options">Adding Configuration Files &amp; Options</h3>
<p>Update your <code>aliases</code> and <code>providers</code> arrays in your <code>app/config/app.php</code> configuration file. The updated values for these arrays can be found <a href="https://github.com/laravel/laravel/blob/v4.1.0/app/config/app.php" target="_blank">in this file</a>. Be sure to add your custom and package service providers / aliases back to the arrays.</p>
<p>Add the new <code>app/config/remote.php</code> file <a href="https://github.com/laravel/laravel/blob/v4.1.0/app/config/remote.php" target="_blank">from the repository</a>.</p>
<p>Add the new <code>expire_on_close</code> configuration option to your <code>app/config/session.php</code> file. The default value should be <code>false</code>.</p>
<p>Add the new <code>failed</code> configuration section to your <code>app/config/queue.php</code> file. Here are the default values for the section:</p>
<pre><code>&apos;failed&apos; =&gt; [
    &apos;database&apos; =&gt; &apos;mysql&apos;, &apos;table&apos; =&gt; &apos;failed_jobs&apos;,
],
</code></pre><p><strong>(Optional)</strong> Update the <code>pagination</code> configuration option in your <code>app/config/view.php</code> file to <code>pagination::slider-3</code>.</p>
<h3 id="controller-updates">Controller Updates</h3>
<p>If <code>app/controllers/BaseController.php</code> has a <code>use</code> statement at the top, change <code>use Illuminate\Routing\Controllers\Controller;</code> to <code>use Illuminate\Routing\Controller;</code>.</p>
<h3 id="password-reminders-updates">Password Reminders Updates</h3>
<p>Password reminders have been overhauled for greater flexibility. You may examine the new stub controller by running the <code>php artisan auth:reminders-controller</code> Artisan command. You may also browse the <a href="docs/security#password-reminders-and-reset">updated documentation</a> and update your application accordingly.</p>
<p>Update your <code>app/lang/en/reminders.php</code> language file to match <a href="https://github.com/laravel/laravel/blob/v4.1.0/app/lang/en/reminders.php" target="_blank">this updated file</a>.</p>
<h3 id="environment-detection-updates">Environment Detection Updates</h3>
<p>For security reasons, URL domains may no longer be used to detect your application environment. These values are easily spoofable and allow attackers to modify the environment for a request. You should convert your environment detection to use machine host names (<code>hostname</code> command on Mac, Linux, and Windows).</p>
<h3 id="simpler-log-files">Simpler Log Files</h3>
<p>Laravel now generates a single log file: <code>app/storage/logs/laravel.log</code>. However, you may still configure this behavior in your <code>app/start/global.php</code> file.</p>
<h3 id="removing-redirect-trailing-slash">Removing Redirect Trailing Slash</h3>
<p>In your <code>bootstrap/start.php</code> file, remove the call to <code>$app-&gt;redirectIfTrailingSlash()</code>. This method is no longer needed as this functionality is now handled by the <code>.htaccess</code> file included with the framework.</p>
<p>Next, replace your Apache <code>.htaccess</code> file with <a href="https://github.com/laravel/laravel/blob/v4.1.0/public/.htaccess" target="_blank">this new one</a> that handles trailing slashes.</p>
<h3 id="current-route-access">Current Route Access</h3>
<p>The current route is now accessed via <code>Route::current()</code> instead of <code>Route::getCurrentRoute()</code>.</p>
<h3 id="composer-update">Composer Update</h3>
<p>Once you have completed the changes above, you can run the <code>composer update</code> function to update your core application files! If you receive class load errors, try running the <code>update</code> command with the <code>--no-scripts</code> option enabled like so: <code>composer update --no-scripts</code>.</p>
<h3 id="wildcard-event-listeners">Wildcard Event Listeners</h3>
<p>The wildcard event listeners no longer append the event to your handler functions parameters. If you require finding the event that was fired you should use <code>Event::firing()</code>.</p>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="./releases.html" class="navigation navigation-prev " aria-label="Previous page: Release Notes"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="./contributions.html" class="navigation navigation-next " aria-label="Next page: Contribution Guide"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="gitbook/app.js"></script>

    
    <script src="gitbook/plugins/gitbook-plugin-livereload/plugin.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":null,"family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
